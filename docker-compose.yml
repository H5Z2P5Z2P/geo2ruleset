services:
  surge-geosite:
    build:
      context: .
    ports:
      - "127.0.0.1:8080:8080"
    environment:
      GEO_PORT: "8080"
      GEO_INDEX_PATH: "/data/index.json"
      GEO_BASE_URL: "http://127.0.0.1:8080"
      GEO_REPO_URL: "https://github.com/xxxbrian/Surge-Geosite"
      GEO_MISC_BASE_URL: "https://raw.githubusercontent.com/xxxbrian/Surge-Geosite/refs/heads/main/misc"
      # Komari 配置
      KOMARI_API_KEY: "${KOMARI_API_KEY:-}"
      KOMARI_BASE_URL: "${KOMARI_BASE_URL:-}"
      KOMARI_PATH_UUID: "${KOMARI_PATH_UUID:-}"
    volumes:
      - ./data:/data
    restart: unless-stopped
    command:
      - -port
      - "8080"
      - -zip-ttl
      - 30m
      - -result-ttl
      - 24h
      - -zip-cache-path
      - /data/zip-cache.gob
      - -zip-refresh-interval
      - 30m

